rm(list=ls())

######## Install the current development version of the p3themes package

if (!require("devtools")) {
  
  install.packages("devtools")
  
}

install_github("p3lab/p3themes", dependencies = TRUE)

######## Load relevant packages

library(p3themes)
library(RCurl)
library(ggplot2)
library(tidyverse)
library(tidyquant)
library(p3themes)

######## Import the sample dataframe
x <- getURL("https://raw.githubusercontent.com/p3lab/p3themes/main/examples/sample_dataset.csv")

df<- read.csv(text = x)

######## The response is a lot of text so wrap it before plotting
df$experience2 = str_wrap(df$experience, width = 35)

######## Plot it without the P3 theme
g <- ggplot(df, aes(experience2, fill=experience2)) + geom_bar() + theme_bw() + theme(legend.position = "none")
g

######## Change labels and add title/substitle information
g1 <- g + xlab("Count of responses") + 
  ylab("Organizing experience") + 
  labs(title = "What was your experience with community organizing prior to joining\nthe Census effort with Houston in Action?",
       subtitle = "Organizer responses, n=8",
       caption = "Data source: Houston in Action 2020 Post-Program Survey")
g1

######## Now add the p3theme to the plot
g2 <- g1 + add_p3theme(g1)
g2
